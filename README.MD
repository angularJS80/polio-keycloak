# ğŸ” polio-keycloak

Spring Cloud Gatewayì—ì„œ [Keycloak](https://www.keycloak.org/)ê³¼ ì—°ë™í•˜ì—¬ URIë³„ ì¸ê°€ ì •ì±…ì„ ìë™ êµ¬ì„±í•˜ëŠ” SDKì…ë‹ˆë‹¤.

> ì¸ê°€ ë¡œì§ì„ ì½”ë“œì—ì„œ ë¶„ë¦¬í•˜ê³ , Keycloak ì •ì±…ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ—’ï¸ í˜„ì¬ ë²„ì „

- **v0.1.2**
- ì»¤ë°‹: `1f2d7306`
- ë¦´ë¦¬ìŠ¤ ë‚ ì§œ: 2025-06-24

---

## ğŸ—ï¸ polio ì¸ê°€ ì•„í‚¤í…ì²˜

Keycloak ê¸°ë°˜ì˜ ë™ì  ì¸ê°€ êµ¬ì¡°ë¥¼ Spring Cloud Gatewayì— ì—°ë™í•˜ì—¬, ì‹¤ì‹œê°„ ê¶Œí•œ ë°˜ì˜ê³¼ API ë³´í˜¸ë¥¼ ì‹¤í˜„í•©ë‹ˆë‹¤.

### ğŸ“Œ êµ¬ì„±ìš”ì†Œ ì—­í•  ë¶„ë¦¬

#### ğŸ§© `polio-gateway`
> **ì¸ê°€ ë¬¸ì§€ê¸° + API ì „ë‹¬ì**

- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ìˆ˜ì‹ 
- HTTP Method / URL ê¸°ë°˜ Scope ì¶”ë¡ 
- `polio-keycloak` SDK í˜¸ì¶œ â†’ Keycloak UMA Ticket ì¸ê°€ ìœ„ì„
- ì¸ê°€ ì„±ê³µ ì‹œ API ì „ë‹¬, ì‹¤íŒ¨ ì‹œ 403 ë°˜í™˜

#### ğŸ§© `polio-keycloak`
> **Keycloak ì—°ë™ SDK (Gateway ë‚´ë¶€ í¬í•¨)**

- Keycloak Resource, Scope, Permission ìë™ ì¡°íšŒ ë° ë§¤í•‘
- Protection API ê¸°ë°˜ ì¸ê°€ ìš”ì²­ ìƒì„±
- `grant_type=uma-ticket` ê¸°ë°˜ ì¸ê°€ ìš”ì²­ ìˆ˜í–‰
- Gatewayì˜ ì¸ê°€ ì²˜ë¦¬ í•µì‹¬

#### ğŸ§© `polio-api`
> **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹ API**

- ì¸ê°€ ë¡œì§ì€ ì—†ìŒ
- Gatewayë¥¼ í†µí•´ ë³´í˜¸ë˜ë©°, ì¸ê°€ëœ ìš”ì²­ë§Œ ìˆ˜ì‹ 
- ì •ì±… ë³€ê²½ ì‹œ ì¬ë°°í¬ ë¶ˆí•„ìš”

---

## ğŸ”„ ìš”ì²­ íë¦„

```plaintext
[Client]
   |
   | HTTP ìš”ì²­
   v
[polio-gateway]
   |
   | â†’ URI ë° Method ê¸°ë°˜ Scope ì¶”ë¡ 
   | â†’ polio-keycloak SDK í˜¸ì¶œ
   | â†’ Keycloakì— ì¸ê°€ ìš”ì²­ (UMA Ticket)
   |
   | (ì¸ê°€ í†µê³¼ ì‹œ)
   v
[polio-api] â† ì‹¤ì œ ìš”ì²­ ì²˜ë¦¬

```

## ğŸ”„ ì ìš©ì˜ˆì‹œ
### ğŸ”§ 1. Gradle ì˜ì¡´ì„± ì„¤ì •
    implementation 'com.github.angularJS80:polio-keycloak:0.1.0'

### ğŸ”§ 2. Security Config ì„¤ì •
    https://github.com/angularJS80/polio-gateway/blob/main/src/main/java/com/polio/gateway/security/GatewaySecurityConfig.java

### ğŸ”§ 3. PermissionRuleUriMapper êµ¬í˜„
    https://github.com/angularJS80/polio-gateway/blob/main/src/main/java/com/polio/gateway/security/authroization/PermissionRuleUriMapper.java

## ğŸ” 4. Keycloak ì „ìš© JWT ê¶Œí•œ ë³€í™˜ê¸°
    https://github.com/angularJS80/polio-gateway/blob/main/src/main/java/com/polio/gateway/security/util/JwtUtil.java

